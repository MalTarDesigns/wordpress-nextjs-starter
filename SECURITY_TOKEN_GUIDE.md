# Complete Security Token Setup Guide for WordPress Next.js

**For Complete Beginners: No Technical Experience Required**

This guide will help you generate all the security tokens needed for your WordPress Next.js integration. Think of these tokens as special passwords that let your Next.js website talk securely to your WordPress backend.

---

## Table of Contents

1. [What Each Token Does (Simple Explanation)](#what-tokens-do)
2. [Method 1: Generate Tokens Online (Easiest)](#method-1-online)
3. [Method 2: Generate Tokens Using Your Computer](#method-2-computer)
4. [Method 3: Manual Token Creation](#method-3-manual)
5. [WordPress Application Password Setup](#wordpress-app-password)
6. [Setting Up Your .env.local File](#env-setup)
7. [Security Best Practices](#security-practices)
8. [Testing Your Setup](#testing)
9. [Troubleshooting](#troubleshooting)
10. [Alternative Methods](#alternative-methods)

---

## What Each Token Does (Simple Explanation) {#what-tokens-do}

Your WordPress Next.js starter needs these security tokens to work properly:

### **Required Tokens:**

| Token Name | What It Does | Length Needed |
|------------|--------------|---------------|
| **HEADLESS_SECRET** | Secret password that lets your Next.js website talk securely to WordPress | 32+ characters |
| **GRAPHQL_JWT_AUTH_SECRET_KEY** | Special key that creates secure login sessions for GraphQL | 32+ characters |
| **WP_USER** | Your WordPress login username | Your actual username |
| **WP_APP_PASS** | Special password you create in WordPress (safer than regular password) | Generated by WordPress |

### **Optional But Recommended:**

| Token Name | What It Does | Length Needed |
|------------|--------------|---------------|
| **PREVIEW_SECRET** | Lets you preview unpublished content securely | 16+ characters |
| **WORDPRESS_PREVIEW_SECRET** | Alternative preview token for different setups | 16+ characters |

### **Simple Analogy:**
Think of tokens like house keys:
- **HEADLESS_SECRET** = Main house key (lets Next.js into WordPress)
- **JWT SECRET** = Security system code (creates secure sessions)
- **APP PASSWORD** = Special guest key (safer than giving out your main key)
- **PREVIEW SECRET** = Mailbox key (access to draft content)

---

## Method 1: Generate Tokens Online (Easiest) {#method-1-online}

### **Step 1: Choose a Secure Token Generator**

**Recommended Safe Generators:**
- üîó [generate-secret.now.sh/32](https://generate-secret.now.sh/32) (generates 32-character tokens)
- üîó [allkeysgenerator.com](https://www.allkeysgenerator.com/Random/Security-Encryption-Key-Generator.aspx)
- üîó [randomkeygen.com](https://randomkeygen.com/) (use "CodeIgniter Encryption Keys")
- üîó [passwordsgenerator.net](https://passwordsgenerator.net/) (set length to 64)

### **Step 2: Generate Each Token**

**For each token you need:**

1. **Open the generator website**
2. **Set the length:**
   - **HEADLESS_SECRET:** 64 characters
   - **GRAPHQL_JWT_AUTH_SECRET_KEY:** 64 characters
   - **PREVIEW_SECRET:** 32 characters
3. **Choose character types:** Include uppercase, lowercase, and numbers (avoid special symbols for compatibility)
4. **Click "Generate"**
5. **Copy the result** and save it with a label

### **Step 3: Generate All Required Tokens**

**Generate these 3 tokens and label them:**

```
Token 1 (HEADLESS_SECRET):
a1b2c3d4e5f6789012345abcdef67890123456789abcdef1234567890abcdef

Token 2 (GRAPHQL_JWT_AUTH_SECRET_KEY):
9876543210abcdef1234567890abcdef1234567890abcdef9876543210abcdef

Token 3 (PREVIEW_SECRET):
preview123secret456token789xyz
```

### **What Good Tokens Look Like:**
- ‚úÖ Mix of uppercase and lowercase letters
- ‚úÖ Include numbers  
- ‚úÖ Are long enough (32-64 characters)
- ‚úÖ Look completely random
- ‚úÖ No spaces or special symbols

### **What Bad Tokens Look Like:**
- ‚ùå password123
- ‚ùå myname2024
- ‚ùå abc123def456 (too short)
- ‚ùå aaaaaaaaaa (repetitive)

---

## Method 2: Generate Tokens Using Your Computer {#method-2-computer}

### **For Windows Users:**

#### **Option A: Using PowerShell (Recommended)**

1. **Open PowerShell:**
   - Press **Windows Key + R**
   - Type `powershell` and press Enter
   - A blue window will open

2. **Generate HEADLESS_SECRET (64 characters):**
   ```powershell
   [System.Web.Security.Membership]::GeneratePassword(64, 10)
   ```
   - Press Enter
   - Copy the result and label it "HEADLESS_SECRET"

3. **Generate GRAPHQL_JWT_AUTH_SECRET_KEY (64 characters):**
   ```powershell
   [System.Web.Security.Membership]::GeneratePassword(64, 10)
   ```
   - Press Enter  
   - Copy the result and label it "GRAPHQL_JWT_AUTH_SECRET_KEY"

4. **Generate PREVIEW_SECRET (32 characters):**
   ```powershell
   [System.Web.Security.Membership]::GeneratePassword(32, 5)
   ```
   - Press Enter
   - Copy the result and label it "PREVIEW_SECRET"

#### **Option B: Using Command Prompt**

1. **Open Command Prompt:**
   - Press **Windows Key + R**
   - Type `cmd` and press Enter

2. **Generate tokens using built-in tools:**
   ```cmd
   powershell -Command "Add-Type -AssemblyName System.Web; [System.Web.Security.Membership]::GeneratePassword(64, 10)"
   ```
   - Run this command 3 times to generate 3 different tokens

### **For Mac Users:**

1. **Open Terminal:**
   - Press **Command + Space**
   - Type `terminal` and press Enter

2. **Generate tokens using OpenSSL:**
   ```bash
   openssl rand -hex 32
   ```
   - This creates a 64-character token
   - Run it multiple times for different tokens

3. **Or use built-in random generation:**
   ```bash
   LC_ALL=C tr -dc A-Za-z0-9 </dev/urandom | head -c 64 ; echo
   ```

---

## Method 3: Manual Token Creation {#method-3-manual}

**If online tools and commands don't work, you can create tokens manually.**

### **Rules for Manual Token Creation:**

1. **Character Requirements:**
   - Use uppercase letters: A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z
   - Use lowercase letters: a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z
   - Use numbers: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9

2. **Length Requirements:**
   - **HEADLESS_SECRET:** Minimum 32 characters, recommended 64
   - **GRAPHQL_JWT_AUTH_SECRET_KEY:** Minimum 32 characters, recommended 64
   - **PREVIEW_SECRET:** Minimum 16 characters, recommended 32

3. **Randomness Tips:**
   - Don't use your name, birthday, or personal information
   - Don't use dictionary words
   - Mix uppercase, lowercase, and numbers randomly
   - Don't create patterns (like abc123def456)

### **Manual Generation Process:**

1. **Get a notepad or text editor**
2. **Create HEADLESS_SECRET:**
   - Think of 64 random characters
   - Example process: Write random letters and numbers
   - Result: `H2k9Lm3pQ7wX5zA1bN8dR4tY6uE9oP2sV1cF8jM4nB7xC0z`

3. **Create GRAPHQL_JWT_AUTH_SECRET_KEY:**
   - Create another completely different 64-character string
   - Don't reuse any part of the first token
   - Example: `M5nB8vC1xF4kJ7hG0zA3dR6tY9uI2oP5sW4eT1qL6rN9kX`

4. **Create PREVIEW_SECRET:**
   - Create a shorter 32-character token
   - Example: `prev1ew2024secure789token1234`

### **Manual Token Examples:**
```
HEADLESS_SECRET: Kj4nM2pL8qR5tY7uE3wQ9zA1sD6fG0hJ4kN2mP5rT8vX1cB9
GRAPHQL_JWT_AUTH_SECRET_KEY: B7xC0zA3dR6tY9uI2oP5sW4eT1qL6rN9kXzM4jH8gF5lK1v
PREVIEW_SECRET: secure2024preview789token456xyz
```

---

## WordPress Application Password Setup {#wordpress-app-password}

**This creates a special, safer password for your Next.js app to connect to WordPress.**

### **Step 1: Log into WordPress Admin**

1. **Open your browser**
2. **Go to your WordPress admin URL:**
   - **If using Cloudways:** `https://your-app-name.cloudwaysapps.com/wp-admin`
   - **Other hosting:** `https://yoursite.com/wp-admin`
3. **Log in** with your regular WordPress username and password

### **Step 2: Navigate to User Profile**

1. **Method A: From top bar**
   - Look for your name in the top-right corner
   - **Hover over your name** (don't click yet)
   - You'll see a dropdown menu appear
   - **Click "Edit My Profile"**

2. **Method B: From sidebar menu**
   - Look at the left sidebar menu
   - **Click "Users"** 
   - **Click "All Users"**
   - **Find your username** in the list
   - **Click on your name**

### **Step 3: Find Application Passwords Section**

1. **What you're looking for:**
   - Scroll down to the bottom of your profile page
   - Look for a section titled **"Application Passwords"**
   - It should have a text field and some explanatory text

2. **If you don't see "Application Passwords":**
   - Your WordPress version might be too old (needs 5.6+)
   - The feature might be disabled by your hosting provider
   - Try updating WordPress first

### **Step 4: Create Application Password**

1. **In the text field labeled "New Application Password Name":**
   - **Type:** `Next.js Headless Site`
   - **Or:** `Headless CMS Integration`
   - **Or:** `API Access`

2. **Click the "Add New Application Password" button**

3. **What happens next:**
   - WordPress will generate a special password
   - **IMPORTANT:** It will look like this: `1234 5678 9abc defg hijk lmno`
   - The password includes **spaces** - this is normal!

### **Step 5: Save Your Application Password**

1. **Copy the entire password**
   - **Include all the spaces** - they're part of the password
   - **Example:** `1234 5678 9abc defg hijk lmno`
   - **Don't remove or change the spaces!**

2. **Save it immediately**
   - This password **will never be shown again**
   - Save it in a text file or password manager
   - Label it as "WP_APP_PASS"

3. **Also note your username**
   - Your **WP_USER** is your WordPress login username
   - Usually "admin" or the username you created when setting up WordPress

### **What Your WordPress Credentials Look Like:**
```
WP_USER: admin
WP_APP_PASS: 1234 5678 9abc defg hijk lmno
```

### **Screenshot Expectations:**

**What you should see in WordPress:**
- A section titled "Application Passwords"
- A text field to enter an application name
- After creating: A table showing your active application passwords
- The actual password displayed once (then hidden forever)

---

## Setting Up Your .env.local File {#env-setup}

**Now you'll put all these tokens into your project's configuration file.**

### **Step 1: Find or Create .env.local**

1. **Navigate to your project folder:**
   - **Open:** `C:\projects\wordpress-next-starter`
   - **Look for:** `.env.local` file

2. **If .env.local doesn't exist:**
   - **Look for:** `.env.example` or `.env.local.example`
   - **Right-click** the example file
   - **Select "Copy"**
   - **Right-click** in empty space and select "Paste"
   - **Rename the copy** to `.env.local`

3. **Open the file:**
   - **Right-click** `.env.local`
   - **Choose "Open with" ‚Üí "Notepad"** (or any text editor)

### **Step 2: Fill in Your Values**

**Replace the placeholder values with your actual tokens and URLs:**

```env
# Frontend Configuration
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_WORDPRESS_API_URL=https://your-actual-wordpress-url.com
NEXT_PUBLIC_WORDPRESS_API_HOSTNAME=your-actual-wordpress-url.com

# Security Keys (Replace with your generated tokens)
HEADLESS_SECRET=your-actual-64-character-token-here
GRAPHQL_JWT_AUTH_SECRET_KEY=your-actual-64-character-token-here

# WordPress Admin Credentials (from Application Password setup)
WP_USER=your-actual-wordpress-username
WP_APP_PASS=your-actual-application-password-with-spaces

# Preview Mode (Optional)
PREVIEW_SECRET=your-actual-preview-token-here
WORDPRESS_PREVIEW_SECRET=your-actual-preview-token-here
```

### **Step 3: Example of Completed File**

```env
# Frontend Configuration
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_WORDPRESS_API_URL=https://mysite123.cloudwaysapps.com
NEXT_PUBLIC_WORDPRESS_API_HOSTNAME=mysite123.cloudwaysapps.com

# Security Keys
HEADLESS_SECRET=a1b2c3d4e5f6789012345abcdef67890123456789abcdef1234567890abcdef
GRAPHQL_JWT_AUTH_SECRET_KEY=9876543210abcdef1234567890abcdef1234567890abcdef9876543210abcdef

# WordPress Credentials  
WP_USER=admin
WP_APP_PASS=1234 5678 9abc defg hijk lmno

# Preview Mode
PREVIEW_SECRET=preview123secure456token
WORDPRESS_PREVIEW_SECRET=preview123secure456token
```

### **Step 4: Save the File**

1. **In your text editor:** Press `Ctrl + S` to save
2. **Make sure** the file is saved as `.env.local` (not `.env.local.txt`)
3. **Close the text editor**

---

## Security Best Practices {#security-practices}

### **Do These Things (Important!):**

#### **‚úÖ Keep Tokens Secret**
- **Never share** tokens on social media, email, or chat
- **Don't post** them on GitHub, forums, or help sites
- **Don't include** them in screenshots

#### **‚úÖ Use Different Tokens**
- **Generate unique tokens** for each purpose
- **Don't reuse** the same token for multiple projects
- **Create new tokens** if you think one might be compromised

#### **‚úÖ Store Tokens Safely**
- **Use a password manager** (LastPass, 1Password, Bitwarden)
- **Keep a backup** of your `.env.local` file in a secure location
- **Don't email** yourself the tokens (emails can be hacked)

#### **‚úÖ Make Tokens Long and Random**
- **Use 32+ characters** for main tokens
- **64 characters** is even better
- **Completely random** - no patterns or personal information

### **Don't Do These Things (Security Risks!):**

#### **‚ùå Never Use Weak Tokens**
- **Don't use:** "password123", "secret", "token"
- **Don't include:** your name, birthday, or personal info
- **Don't use:** dictionary words or common phrases

#### **‚ùå Never Share Your .env.local File**
- **Don't upload** to GitHub (it should be in .gitignore)
- **Don't email** or share the entire file
- **Don't put** in public folders or cloud storage

#### **‚ùå Never Use the Same Tokens Everywhere**
- **Don't reuse** tokens across different projects
- **Don't use** the same token for multiple purposes
- **Don't copy** tokens from tutorials or examples

### **If Tokens Are Compromised:**

1. **Generate new tokens immediately** using any method above
2. **Update your .env.local file** with new tokens
3. **Restart your development server**
4. **Test** to make sure everything still works
5. **Delete old application passwords** from WordPress

---

## Testing Your Setup {#testing}

### **Step 1: Restart Development Server**

1. **If your Next.js server is running:**
   - **Go to the terminal** where you ran `pnpm dev`
   - **Press `Ctrl + C`** to stop the server
   - **Wait for it to fully stop**

2. **Restart with new environment:**
   - **Type:** `pnpm dev`
   - **Press Enter**
   - **Wait for "Ready"** message

### **Step 2: Check for Environment Errors**

**Look at the terminal output for:**

‚úÖ **Good signs:**
```
‚úì Ready in 2.1s
‚úì Local: http://localhost:3000
‚úì Network: http://192.168.1.xxx:3000
```

‚ùå **Error signs:**
```
Error: Required environment variable NEXT_PUBLIC_WORDPRESS_API_URL is not set
Error: HEADLESS_SECRET environment variable is not set
```

### **Step 3: Test WordPress Connection**

1. **Open your browser**
2. **Go to:** `http://localhost:3000`
3. **What you should see:**
   - **Working:** Your Next.js site loads with WordPress content
   - **Not working:** Error messages about connections or environment variables

### **Step 4: Test GraphQL Endpoint**

1. **In browser, go to:** `https://your-wordpress-url.com/graphql`
2. **What you should see:**
   - **Working:** GraphQL playground or API documentation
   - **Not working:** 404 error or "plugin not found"

### **Step 5: Validate Environment Variables**

**If your project has a validation command:**
```bash
pnpm validate-env
```

**This will check:**
- All required variables are set
- URLs are properly formatted  
- Tokens meet length requirements

---

## Troubleshooting {#troubleshooting}

### **Common Issues and Solutions:**

#### **‚ùå "Environment variable missing" Error**

**Problem:** Terminal shows missing environment variables

**Solutions:**
1. **Check file name** - must be exactly `.env.local` (not `.env.local.txt`)
2. **Check file location** - must be in project root folder
3. **Restart dev server** - stop with `Ctrl+C`, then `pnpm dev`
4. **Check spelling** - variable names must match exactly

#### **‚ùå "Invalid credentials" Error**

**Problem:** WordPress login fails

**Solutions:**
1. **Double-check WP_USER** - must match your WordPress username exactly
2. **Check WP_APP_PASS** - include all spaces as shown in WordPress
3. **Create new application password** - the old one might have expired
4. **Verify WordPress admin access** - make sure you can still log in normally

#### **‚ùå "Connection refused" Error**

**Problem:** Next.js can't connect to WordPress

**Solutions:**
1. **Check WordPress URL** - make sure your site is online
2. **Test URL manually** - visit the URL in your browser
3. **Check for HTTPS** - WordPress URL might need `https://` instead of `http://`
4. **Verify WPGraphQL** - make sure the plugin is active

#### **‚ùå "Token invalid" or "Authentication failed"**

**Problem:** Security tokens not working

**Solutions:**
1. **Generate new tokens** - create fresh tokens using any method above
2. **Check token length** - main tokens need 32+ characters  
3. **Remove extra spaces** - check for spaces at beginning/end of tokens
4. **Use only allowed characters** - stick to letters and numbers

#### **‚ùå GraphQL Endpoint Returns 404**

**Problem:** `/graphql` URL doesn't work

**Solutions:**
1. **Check WPGraphQL plugin** - must be installed and activated
2. **Save permalinks** - go to WordPress Settings ‚Üí Permalinks ‚Üí Save Changes
3. **Try plugin refresh** - deactivate and reactivate WPGraphQL
4. **Check plugin version** - update to latest version

### **Testing Individual Components:**

#### **Test 1: WordPress Admin Access**
```
URL: https://your-site.com/wp-admin  
Expected: WordPress login page
Action: Login with regular credentials
Expected: WordPress dashboard
```

#### **Test 2: GraphQL Endpoint**
```
URL: https://your-site.com/graphql
Expected: GraphQL playground or API documentation  
Action: Try a simple query
Expected: JSON response with WordPress data
```

#### **Test 3: Environment Variables**
```bash
Command: pnpm dev
Expected: "Ready" message without errors
Action: Visit http://localhost:3000
Expected: Next.js site loading WordPress content
```

---

## Alternative Methods {#alternative-methods}

### **Password Managers (Recommended for Organizations)**

#### **Using LastPass:**
1. **Open LastPass** password generator
2. **Set length:** 64 characters
3. **Enable:** Uppercase, lowercase, numbers
4. **Disable:** Symbols (for compatibility)
5. **Generate** and save in LastPass vault

#### **Using 1Password:**
1. **Open 1Password**
2. **Use password generator**
3. **Choose "Random Password"**
4. **Set length:** 64 characters
5. **Generate** and save in secure note

#### **Using Bitwarden:**
1. **Go to password generator**
2. **Set type:** Password
3. **Length:** 64 characters
4. **Options:** Letters and numbers only
5. **Generate** and save in vault

### **Mobile Apps**

#### **For iPhone/Android:**
1. **Download:** "Strong Password Generator" or similar app
2. **Set length:** 64 characters
3. **Choose character types:** Letters and numbers
4. **Generate** multiple tokens
5. **Send to computer** via secure method (email to yourself, cloud storage)

### **Command Line (Advanced Users)**

#### **Linux/Mac Terminal:**
```bash
# Generate HEADLESS_SECRET
openssl rand -hex 32

# Generate multiple tokens
for i in {1..3}; do openssl rand -hex 32; done

# Generate with letters and numbers only
LC_ALL=C tr -dc A-Za-z0-9 </dev/urandom | head -c 64; echo
```

#### **Windows PowerShell (Advanced):**
```powershell
# Generate secure random string
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 64 | % {[char]$_})

# Generate multiple tokens
1..3 | % { -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 64 | % {[char]$_}) }
```

---

## Backup and Recovery

### **Creating a Backup:**

1. **Copy your .env.local file:**
   - **Right-click** `.env.local`
   - **Select "Copy"**
   - **Paste** as `.env.backup` in a secure folder

2. **Document your tokens:**
   - **Create a text file** with token labels and values
   - **Save** in password manager or secure location
   - **Include date created** and purpose

3. **WordPress Application Passwords:**
   - **Take screenshot** of application passwords section
   - **Note** which application passwords belong to which projects

### **If You Need to Reset Everything:**

1. **Generate new security tokens** using any method above
2. **Create new WordPress application password**
3. **Update .env.local** with all new values
4. **Delete old application password** from WordPress
5. **Restart development server**
6. **Test full connection**

### **Emergency Recovery:**

**If you lose your tokens but your site is working:**
1. **Copy values from working production environment**
2. **Or generate new tokens and update everywhere**
3. **Update development, staging, and production**

**If you lose access to WordPress:**
1. **Reset WordPress password** through hosting provider
2. **Log into WordPress** with new password
3. **Create new application password**
4. **Update WP_USER and WP_APP_PASS**

---

## Summary

### **What You Should Have Now:**

‚úÖ **Generated Security Tokens:**
- HEADLESS_SECRET (64 characters)
- GRAPHQL_JWT_AUTH_SECRET_KEY (64 characters)  
- PREVIEW_SECRET (32 characters)

‚úÖ **WordPress Application Password:**
- WP_USER (your username)
- WP_APP_PASS (generated password with spaces)

‚úÖ **Configured .env.local File:**
- All tokens filled in
- WordPress URLs configured
- File saved in project root

‚úÖ **Security Best Practices:**
- Tokens stored safely
- No sharing or public exposure
- Backup copy created

### **Next Steps:**

1. **‚úÖ Test your connection** - restart dev server and check for errors
2. **‚úÖ Verify WordPress integration** - make sure content loads
3. **‚úÖ Add some test content** in WordPress to see it in Next.js
4. **‚úÖ Set up production environment** when ready for deployment

### **Total Time Required:**
- **Token generation:** 10-15 minutes
- **WordPress application password:** 5 minutes  
- **Environment file setup:** 5-10 minutes
- **Testing and troubleshooting:** 10-15 minutes

**Your security tokens are ready for headless WordPress integration!**

---

*This guide is designed for beginners. If you encounter issues not covered here, check the troubleshooting section or consult the WordPress and Next.js documentation.*